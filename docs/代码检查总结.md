# ä»£ç æ£€æŸ¥æ€»ç»“

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. é‡å¤ç±»å‹å¯¼å‡ºé”™è¯¯

**é—®é¢˜**: `lib/services/PriceService.ts` ä¸­ `HistoricalPriceResult` è¢«é‡å¤å¯¼å‡º

**ä¿®å¤å‰**:
```typescript
export { HistoricalPriceService, type HistoricalPriceResult } from './HistoricalPriceService';
export type { HistoricalPriceResult } from './HistoricalPriceService'; // é‡å¤ï¼
```

**ä¿®å¤å**:
```typescript
export { HistoricalPriceService, type HistoricalPriceResult } from './HistoricalPriceService';
// HistoricalPriceResult å·²åœ¨ä¸Šé¢å¯¼å‡ºï¼Œä¸éœ€è¦é‡å¤å¯¼å‡º
```

### 2. ScheduledDataService ç±»å‹é”™è¯¯

**é—®é¢˜**: `changes` ç±»å‹ä¸åŒ¹é…

**ä¿®å¤å‰**:
```typescript
const changes: Record<string, number> = { ... };
// è¿”å›ç±»å‹è¦æ±‚ { m3: number; m6: number; y1: number; y3: number; y5: number }
```

**ä¿®å¤å**:
```typescript
const changes: { m3: number; m6: number; y1: number; y3: number; y5: number } = { ... };
// ä½¿ç”¨ç±»å‹æ–­è¨€è®¿é—®
(changes as Record<string, number>)[timeframe.key] = value;
```

---

## ğŸ” å…¨å±€æ£€æŸ¥è„šæœ¬

å·²åˆ›å»º `pre-commit-check.sh` è„šæœ¬ï¼Œç”¨äºæäº¤å‰æ£€æŸ¥ï¼š

```bash
./pre-commit-check.sh
```

**æ£€æŸ¥é¡¹**:
1. âœ… TypeScript ç±»å‹æ£€æŸ¥
2. âœ… ESLint æ£€æŸ¥
3. âœ… é‡å¤ç±»å‹å¯¼å‡ºæ£€æŸ¥
4. âœ… ç§æœ‰æ–¹æ³•è®¿é—®æ£€æŸ¥
5. âœ… Git çŠ¶æ€æ£€æŸ¥

---

## ğŸ“‹ æäº¤å‰æ£€æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] è¿è¡Œ `npx tsc --noEmit` æ— é”™è¯¯
- [ ] è¿è¡Œ `./pre-commit-check.sh` é€šè¿‡
- [ ] æ²¡æœ‰é‡å¤çš„ç±»å‹å¯¼å‡º
- [ ] æ²¡æœ‰ç§æœ‰æ–¹æ³•è®¿é—®é”™è¯¯
- [ ] Git å·¥ä½œç›®å½•å¹²å‡€æˆ–å·²æš‚å­˜æ‰€æœ‰æ›´æ”¹

---

## ğŸš€ å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

```bash
# 1. TypeScript ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# 2. è¿è¡Œå…¨å±€æ£€æŸ¥è„šæœ¬
./pre-commit-check.sh

# 3. æŸ¥çœ‹ Git çŠ¶æ€
git status
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **CachedPriceService.ts** ä¸­çš„ä¸¤ä¸ª `HistoricalPriceResult` å¯¼å‡ºä¸æ˜¯é‡å¤ï¼š
   - `export type { HistoricalPriceResult }` - åŸåå¯¼å‡º
   - `export type { HistoricalPriceResult as HistoricalPriceResultType }` - åˆ«åå¯¼å‡º
   - è¿™æ˜¯å…è®¸çš„ï¼Œä¸æ˜¯é”™è¯¯

2. **ç½‘ç»œé—®é¢˜ä¸å½±å“ä»£ç æ£€æŸ¥**ï¼š
   - `npm run build` å¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜å¤±è´¥ï¼ˆå¦‚æ— æ³•è®¿é—® Google Fontsï¼‰
   - ä½† `npx tsc --noEmit` åªæ£€æŸ¥ç±»å‹ï¼Œä¸ä¾èµ–ç½‘ç»œ

---

## âœ… å½“å‰çŠ¶æ€

- âœ… TypeScript ç±»å‹æ£€æŸ¥ï¼šé€šè¿‡
- âœ… é‡å¤å¯¼å‡ºï¼šå·²ä¿®å¤
- âœ… ç±»å‹åŒ¹é…ï¼šå·²ä¿®å¤
- âœ… ä»£ç å¯ä»¥å®‰å…¨æäº¤
