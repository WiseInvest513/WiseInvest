# Git Push 网络超时解决方案

## 🔴 错误信息

```
fatal: unable to access 'https://github.com/WiseInvest513/WiseInvest.git/': 
Recv failure: Operation timed out
```

## ✅ 快速解决方案

### 方法 1: 使用一键修复脚本（推荐）

```bash
# 1. 进入项目目录
cd "/Users/balala/Persona/Blog/MyBlog"

# 2. 运行一键修复脚本
./fix-git-remote-and-push.sh
```

这个脚本会自动：
- ✅ 修复 remote URL
- ✅ 配置代理（端口 7897）
- ✅ 推送代码

---

### 方法 2: 手动配置代理（3 步）

#### 步骤 1: 设置代理环境变量

```bash
export http_proxy=http://127.0.0.1:7897
export https_proxy=http://127.0.0.1:7897
```

#### 步骤 2: 推送代码

```bash
git push origin main
```

#### 步骤 3: 如果成功，可以永久配置（可选）

```bash
git config --global http.https://github.com.proxy http://127.0.0.1:7897
git config --global https.https://github.com.proxy http://127.0.0.1:7897
```

---

### 方法 3: 永久配置 Git 代理（一次设置，永久有效）

```bash
# 仅对 GitHub 使用代理
git config --global http.https://github.com.proxy http://127.0.0.1:7897
git config --global https.https://github.com.proxy http://127.0.0.1:7897

# 然后推送
git push origin main
```

**优点**: 配置一次后，以后推送都不需要再设置代理

---

## 🔍 检查代理是否运行

### 检查代理端口是否可用

```bash
# 测试代理连接
curl -I http://127.0.0.1:7897

# 或测试通过代理访问 GitHub
curl -I --proxy http://127.0.0.1:7897 https://github.com
```

### 如果代理未运行

1. **启动你的代理软件**（如 Clash、V2Ray 等）
2. **确认代理端口**（通常是 7897，但可能不同）
3. **检查代理设置**：
   - HTTP 代理端口
   - SOCKS5 代理端口

---

## 📝 完整操作示例

### 示例 1: 使用一键脚本（最简单）

```bash
cd "/Users/balala/Persona/Blog/MyBlog"
./fix-git-remote-and-push.sh
```

### 示例 2: 手动配置（分步执行）

```bash
# 1. 进入项目目录
cd "/Users/balala/Persona/Blog/MyBlog"

# 2. 设置代理
export http_proxy=http://127.0.0.1:7897
export https_proxy=http://127.0.0.1:7897

# 3. 推送
git push origin main
```

### 示例 3: 永久配置（推荐长期使用）

```bash
# 1. 永久配置代理
git config --global http.https://github.com.proxy http://127.0.0.1:7897
git config --global https.https://github.com.proxy http://127.0.0.1:7897

# 2. 推送（以后都不需要再设置代理）
git push origin main
```

---

## ⚙️ 代理端口说明

### 常见代理端口

- **7897**: Clash、V2Ray 常用端口
- **1080**: SOCKS5 常用端口
- **8080**: HTTP 代理常用端口

### 如何确认你的代理端口？

1. **查看代理软件设置**
   - Clash: 设置 > 端口设置
   - V2Ray: 配置文件中查看

2. **查看系统代理设置**
   - macOS: 系统设置 > 网络 > 高级 > 代理

3. **测试端口**

```bash
# 测试端口 7897
curl -I --proxy http://127.0.0.1:7897 https://github.com

# 测试端口 1080（SOCKS5）
curl -I --proxy socks5://127.0.0.1:1080 https://github.com
```

---

## 🔧 其他解决方案

### 方案 A: 增加超时时间

```bash
git config --global http.postBuffer 524288000
git config --global http.lowSpeedLimit 0
git config --global http.lowSpeedTime 999999

git push origin main
```

### 方案 B: 使用 SSH（如果代理不行）

```bash
# 1. 配置 SSH 密钥（如果还没有）
ssh-keygen -t ed25519 -C "your_email@example.com"

# 2. 添加 SSH 密钥到 GitHub
cat ~/.ssh/id_ed25519.pub
# 复制内容，添加到 GitHub Settings > SSH and GPG keys

# 3. 修改 remote 为 SSH
git remote set-url origin git@github.com:WiseInvest513/WiseInvest.git

# 4. 推送
git push origin main
```

### 方案 C: 更换网络环境

- 使用手机热点
- 更换 WiFi 网络
- 使用 VPN

---

## ❓ 常见问题

### Q: 代理端口不是 7897 怎么办？

**A**: 修改脚本或命令中的端口号：

```bash
# 例如，如果你的代理端口是 1080
export http_proxy=http://127.0.0.1:1080
export https_proxy=http://127.0.0.1:1080
```

### Q: 使用 SOCKS5 代理怎么办？

**A**: Git 不支持 SOCKS5，需要：
1. 使用 HTTP 代理端口
2. 或使用 `proxychains` 等工具

### Q: 如何取消代理配置？

**A**: 

```bash
# 取消永久配置
git config --global --unset http.https://github.com.proxy
git config --global --unset https.https://github.com.proxy

# 取消当前会话的环境变量
unset http_proxy
unset https_proxy
```

### Q: 推送时还是超时？

**A**: 
1. 检查代理是否运行
2. 确认代理端口正确
3. 尝试重启代理软件
4. 检查防火墙设置

---

## 📚 相关文档

- [Git Push 问题修复](./GIT_PUSH_FIX.md)
- [Git Remote 设置](./GIT_REMOTE_SETUP.md)
- [命令行操作指南](./命令行操作指南.md)

---

## 🎯 推荐操作流程

1. **首先尝试**: `./fix-git-remote-and-push.sh`（一键解决）
2. **如果失败**: 手动设置代理后推送
3. **长期使用**: 永久配置 Git 代理
